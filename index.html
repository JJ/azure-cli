<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>Tutorial del CLI de Azure: Nube desde la línea de órdenes</title>
    
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/extra.css">
    <link rel="stylesheet" href="css/theme/sky.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">
    
    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">

	<div class='footer'><a rel="license"
		 href="http://creativecommons.org/licenses/by-sa/4.0/"><img
		alt="Licencia de Creative Commons" style="border-width:0"
src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"
/></a><br />This work is under a <a rel="license"
				    href="http://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0 license</a>.</div>

	<section data-background='code/for-the-show/src/nubes.gif'
	   ><h1>La nube desde la línea de órdenes</h1>
	  <h2><code>@jjmerelo</code> para <a href='https://www.meetup.com/es-ES/Granada-Geek/'>Granada Geek</a> + @iv_gii</h2>
	</section>

	<section data-background='https://farm5.staticflickr.com/4857/46233248981_1730df6cfb_k_d.jpg' alt='Stallman y su imagen'>
	  <blockquote>La nube son los ordenadores de otros</blockquote></section>

	<section><h2>Pero...</h2>
	  <h1 class='fragment'>Los APIs están <strong>documentados</strong></h1>
	  <h1 class='fragment'>CLI/SDKs son <strong>libres</strong></h1>
	</section>

	<section data-background='img/commits.png'><h1>La documentación también es <strong>libre</strong></h1></section>

	<section data-background='https://farm5.staticflickr.com/4855/32138357728_3cd84f40ca_k_d.jpg'><h1>Consigue tu propia cuenta de Azure</h1>
	  <aside class='notes'>Cuentas gratuitas de un mes, y algunas por patrocinios como el de la UGR. Azure es uno de los "tres grandes", junto con Google o Amazon. En cuestión de soporte al software libre, posiblemente Azure es el mejor. Eso no quiere decir que otros sistemas de cloud no tengan conceptos similares.
	  </aside>
	</section>
	
	</section>
	<section><h1><a href='https://docs.microsoft.com/es-es/cli/azure/install-azure-cli?view=azure-cli-latest'>Descargando CLI: <code>az</code></a></h1>
	  <h2 class='fragment'>Mejor con Python 2</h2>
	  <aside class='notes'>A veces da problemas con Python 3.</aside></section>

	<!-- Conceptos fundamentales -->
	<section>
	  <section><h1>Conéctate a tu cuenta</h1>
	    <pre><code>az login</code></pre>
	    <aside class='notes'>Supongamos que tienes tu propia cuenta, aunque no es la única forma de conectar un ordenador a la cuenta en Azure. Alguien te puede haber dado permisos, o puede haber creado un <em>service principal</em></aside>
	  </section>
	  <section><h1>Lista tus suscripciones</h1>
	    <pre><code>az account list</code></pre>
	    <img src='img/account.png' alt='cuenta en json'>
	    <aside class='notes'>El resultado está en JSON, pero se puede filtrar de muchas maneras diferentes. Pero veamos antes cosas básicas de estos comandos.</aside>
	  </section>

	  <section>
	    <pre><code>az account list</code></pre>
	    <pre class='fragment'><code>az orden   suborden</code></pre>
	    <h2 class='fragment'>⇒Resultado en JSON</h2>
	  </section>

        </section>

        <section>  <!-- Continúa con los filtros, queries y diferentes
          salidas -->

          <section>
            <h1>Filtrando los resultados</h1>
            <pre><code>az account list  -o table</code></pre>
            <img src='img/account-table.png' alt='Tabla con cuentas'>
            <aside class='notes'><code>-o</code> te ofrece los
            resultados en diferentes formatos, especialmente en
            algunos que son más visibles, como este. Luego se puede
              usar <code>grep</code> para filtrar, si es
              necesario</aside>
          </section>

          <section><h1>Ayuda interactiva: <code>az interactive</code></h1>
            <img src='account-interactive.png' alt='Muestra los formatos'>

            <aside class='notes'>Estos cuatro formatos (c|t)sv y
              json(con c, si quieres verlo en colores un poquito más
              claro).</aside>
            
          </section>

          <section><h1>Filtrando con <code>jq</code></h1>
            <pre><code>az vm image list | jq ".[] | [.offer, .publisher]"</code></pre>

            <aside class='notes'>Si ya tienes jq instalado, puedes
          usarlo para filtrar los resultados. En este caso estamos
          listando las imágenes de sistemas operativos que tenemos
          disponibles, sin tener la lista completa. Las imágenes de
              SOs están divididas por <code>.offer</code>, que es el
              tipo de sistema operativo, y <code>.publisher</code>,
              que es la empresa que lo ofrece. Pero hay formas más
              simples de hacerlo.</aside>
          </section>

          <section><h1>Usando <code>--query</code></h1>
            <pre><code>az account list --query "[].[user.name,name]" -o tsv</code></pre>
            <pre class='fragment'><code>                --query "[].[user.name,name]" -o tabla tabuladores   </code></pre>
            <pre class='fragment'><code>                --query "[un
            array].[creamos otro array]"</pre></code>

            <aside class='notes'>Los campos que estamos extrayendo del
	  JSON siguen el camino al mismo; es un array de hashes, cada
	      hash tiene un elemento nombre, y otro <code>user</code>,
	      del cual también extraemos el nombre. Con esto ya hemos
	  visto tres maneras diferentes de mostrar y filtrar
	  resultados: usando diferentes formas de salir o usando
	  filtros o bien externos o bien internos. Estas dos opciones,
	  --query y -o se pueden aplicar a todas las órdenes que den
	      un resultado.</aside>
          </section>
        </section>

        
	  <section><h1>Elige tu <strong>suscripción</strong>
	    </h1>

	    <pre><code>az account set --subscription c6d4056e-df8a-4c06-b229-3fdc44e4f07</code></pre>
	    <aside class='notes'>La nube siempre es de pago, aunque pueda haber algunas actividades que sean gratuitas. Una cuenta puede tener uno o varios correos electrónicos asignados, con una o varias suscripciones. Esas suscripciones a veces se obtienen mediante "cupones", o corresponden a un "lab" como el patrocinio que tenemos en la UGR.</aside>
	  </section>
          </section>


      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
      width: "100%",
      controls: true,
      progress: true,
      history: true,
      dependencies: [
      { src: 'plugin/notes/notes.js', async: true },
      { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
      ]
      });
    </script>
  </body>
</html>
